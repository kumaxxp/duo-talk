# AITuber RAGã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬ä»•æ§˜æ›¸ v1.0

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ã¨ç›®çš„](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ã¨ç›®çš„)
2. [ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆåˆ†æ](#2-ãƒ¡ãƒªãƒƒãƒˆãƒ‡ãƒ¡ãƒªãƒƒãƒˆåˆ†æ)
3. [ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶](#3-ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶)
4. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#4-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
5. [2ãƒ•ã‚§ãƒ¼ã‚ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ](#5-2ãƒ•ã‚§ãƒ¼ã‚ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ)
6. [å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#6-å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ã¨ç›®çš„

### 1.1 ç›®çš„
**é•·æœŸè¨˜æ†¶ã‚’æŒã¤AITuberã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å®Ÿç¾**

- **çŸ­æœŸè¨˜æ†¶ã®é™ç•Œå…‹æœ**: LLMã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆ4K-32K ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã‚’è¶…ãˆãŸè¨˜æ†¶
- **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è²«æ€§ã®ç¶­æŒ**: éå»ã®ç™ºè¨€ãƒ»ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã«åŸºã¥ãæ€§æ ¼ã®æŒç¶š
- **çŸ¥è­˜ã®æ‹¡å¼µ**: PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ç”»åƒã€é…ä¿¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‹ã‚‰ã®å­¦ç¿’
- **é–¢ä¿‚æ€§ã®è¨˜æ†¶**: è¦–è´è€…ã¨ã®éå»ã®ã‚„ã‚Šå–ã‚Šã‚’è¨˜æ†¶ãƒ»å‚ç…§

### 1.2 é©ç”¨ã‚·ãƒŠãƒªã‚ª

```
é…ä¿¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– â”€â”
è¨­å®šè³‡æ–™PDF   â”€â”¤â†’ RAGæ§‹ç¯‰ â†’ é•·æœŸè¨˜æ†¶DB â†’ duo-talk â†’ é…ä¿¡å¿œç­”
ã‚­ãƒ£ãƒ©ç”»åƒ    â”€â”˜                              â†“
                                          æ–°ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰
                                              â†“
                                          (ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯)
```

---

## 2. ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆåˆ†æ

### 2.1 ãƒ¡ãƒªãƒƒãƒˆ

| ã‚«ãƒ†ã‚´ãƒª | å†…å®¹ |
|---------|------|
| **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ€§** | éå»ã®ç™ºè¨€ã¨çŸ›ç›¾ã—ãªã„ä¸€è²«ã—ãŸæ€§æ ¼ç¶­æŒ |
| **è¦–è´è€…ä½“é¨“** | ã€Œè¦šãˆã¦ã„ã¦ãã‚Œã‚‹ã€æ„Ÿå‹•ä½“é¨“ã®æä¾› |
| **çŸ¥è­˜æ‹¡å¼µ** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å­¦ç¿’ã§ããªã„æƒ…å ±ã®è£œå®Œ |
| **ã‚³ã‚¹ãƒˆå‰Šæ¸›** | é•·ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ¯å›é€ä¿¡ã—ãªãã¦æ¸ˆã‚€ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | 100æ™‚é–“åˆ†ã®é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚‚æ¤œç´¢å¯èƒ½ |

### 2.2 ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

| ã‚«ãƒ†ã‚´ãƒª | å†…å®¹ | å¯¾ç­– |
|---------|------|------|
| **åˆæœŸæ§‹ç¯‰ã‚³ã‚¹ãƒˆ** | GPUè³‡æºã‚’å¤§é‡æ¶ˆè²»ï¼ˆæ•°æ™‚é–“ã€œæ•°æ—¥ï¼‰ | A5000ã§å¤œé–“ãƒãƒƒãƒå‡¦ç† |
| **æ¤œç´¢é…å»¶** | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«50-200ms | ã‚­ãƒ£ãƒƒã‚·ãƒ¥+ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ– |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | 100æ™‚é–“ã§5-10GBç¨‹åº¦ | å®šæœŸçš„ãªå¤ã„ãƒ‡ãƒ¼ã‚¿ã®åœ§ç¸® |
| **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹** | å®šæœŸçš„ãªå†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå¿…è¦ | é€±æ¬¡è‡ªå‹•å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ |
| **èª¤æ¤œç´¢ãƒªã‚¹ã‚¯** | ç„¡é–¢ä¿‚ãªæƒ…å ±ã‚’å¼•ãå¯èƒ½æ€§ | ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°é–¾å€¤ã®èª¿æ•´ |

---

## 3. ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶

### 3.1 æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆCLIå®Ÿè¡Œ on A5000ï¼‰

#### GPUè¦ä»¶
```yaml
æ¨å¥¨ç’°å¢ƒ: RTX A5000 (24GB)
ç”¨é€”åˆ¥GPUä½¿ç”¨ç‡:
  - PDFå‡¦ç† (OCR):
      GPU: 2-4GB
      å‡¦ç†é€Ÿåº¦: 100ãƒšãƒ¼ã‚¸/åˆ†
  - ç”»åƒå‡¦ç† (CLIP/BLIP):
      GPU: 8-12GB
      å‡¦ç†é€Ÿåº¦: 200æš/åˆ†
  - åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ:
      GPU: 6-10GB
      å‡¦ç†é€Ÿåº¦: 10,000ãƒãƒ£ãƒ³ã‚¯/åˆ†
  - å…¨ä½“åŒæ™‚å®Ÿè¡Œæ™‚:
      GPU: 18-20GB (ãƒ”ãƒ¼ã‚¯)
```

#### ãƒ¡ãƒ¢ãƒªãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
```yaml
ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ¢ãƒª: 32GBæ¨å¥¨ (æœ€ä½16GB)
ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸:
  - å…¥åŠ›ãƒ‡ãƒ¼ã‚¿: ~50GB
    - é…ä¿¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‹•ç”»: 40GB (100æ™‚é–“ @ 400MB/h)
    - PDFè³‡æ–™: 5GB
    - ç”»åƒç´ æ: 5GB
  - å‡¦ç†ä¸­ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«: ~100GB
  - æœ€çµ‚ãƒ™ã‚¯ãƒˆãƒ«DB: 5-10GB
  - åˆè¨ˆ: ç´„160-200GB
```

#### å‡¦ç†æ™‚é–“è¦‹ç©ã‚‚ã‚Š
```yaml
100æ™‚é–“åˆ†ã®é…ä¿¡ãƒ‡ãƒ¼ã‚¿å‡¦ç†:
  1. éŸ³å£°æ–‡å­—èµ·ã“ã—: 50-100æ™‚é–“ (Whisper Large)
  2. PDFæŠ½å‡º: 2-5æ™‚é–“ (1,000ãƒšãƒ¼ã‚¸æƒ³å®š)
  3. ç”»åƒå‡¦ç†: 1-3æ™‚é–“ (10,000æšæƒ³å®š)
  4. ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²: 1æ™‚é–“
  5. åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ: 3-5æ™‚é–“
  6. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰: 1-2æ™‚é–“
  åˆè¨ˆ: 58-116æ™‚é–“ (2.5-5æ—¥)
```

### 3.2 åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆduo-talkçµ±åˆ on RTX1660Tiï¼‰

#### GPUè¦ä»¶
```yaml
æ¨å¥¨ç’°å¢ƒ: RTX 1660 Ti (6GB) ã§ååˆ†
ç”¨é€”åˆ¥GPUä½¿ç”¨ç‡:
  - ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢: CPUå®Ÿè¡Œ (GPUã»ã¼ä¸è¦)
  - LLMæ¨è«– (vLLM): 4-5GB (Qwen2.5-7B-AWQ)
  - åˆè¨ˆ: 4-5GB
  
æ³¨æ„: RAGæ¤œç´¢è‡ªä½“ã¯CPU/RAMä¸»ä½“ã€GPUè² è·ãªã—
```

#### ãƒ¡ãƒ¢ãƒªãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
```yaml
ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ¢ãƒª: 16GBæ¨å¥¨
æ¤œç´¢ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·:
  - ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢: 30-100ms
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿: 10-20ms
  - ãƒªãƒ©ãƒ³ã‚­ãƒ³ã‚°: 20-50ms
  - åˆè¨ˆ: 60-170ms (å¹³å‡100ms)
```

---

## 4. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 4.1 å…¨ä½“æ§‹æˆå›³

```mermaid
graph TB
    subgraph "æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º (CLI on A5000)"
        A1[é…ä¿¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‹•ç”»] --> B1[Whisperæ–‡å­—èµ·ã“ã—]
        A2[PDFè³‡æ–™] --> B2[PyPDF2/PDFPlumber]
        A3[ç”»åƒç´ æ] --> B3[CLIP/BLIP2]
        
        B1 --> C[ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²å™¨]
        B2 --> C
        B3 --> C
        
        C --> D[ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º]
        D --> E[åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ<br/>BGE-M3/ruri-large]
        E --> F[Qdrant<br/>ãƒ™ã‚¯ãƒˆãƒ«DB]
    end
    
    subgraph "åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚º (duo-talk on RTX1660Ti)"
        G[ãƒ¦ãƒ¼ã‚¶ãƒ¼è³ªå•] --> H[ã‚¯ã‚¨ãƒªåŸ‹ã‚è¾¼ã¿]
        H --> I[Qdrantãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢]
        F --> I
        I --> J[é–¢é€£ãƒãƒ£ãƒ³ã‚¯å–å¾—]
        J --> K[duo-talk<br/>LLMå¿œç­”ç”Ÿæˆ]
        K --> L[ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¿œç­”]
    end
    
    style A1 fill:#e1f5ff
    style A2 fill:#e1f5ff
    style A3 fill:#e1f5ff
    style F fill:#ffe1e1
    style K fill:#e1ffe1
```

### 4.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è©³ç´°

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant DT as duo-talk
    participant QE as ã‚¯ã‚¨ãƒªåŸ‹ã‚è¾¼ã¿
    participant QD as Qdrant
    participant LLM as vLLM (Qwen2.5)
    
    User->>DT: "ã‚„ãªã¡ã‚ƒã‚“ã€å…ˆé€±ã®é…ä¿¡ã§è©±ã—ã¦ãŸæœ¬ã¯?"
    DT->>QE: ã‚¯ã‚¨ãƒªãƒ™ã‚¯ãƒˆãƒ«åŒ–
    QE->>QD: ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢<br/>(top_k=5, filter=character_id)
    QD-->>DT: é–¢é€£ãƒãƒ£ãƒ³ã‚¯Ã—5<br/>(ã‚¹ã‚³ã‚¢: 0.85, 0.82, 0.78...)
    DT->>DT: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰<br/>(ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ + RAG + å±¥æ­´)
    DT->>LLM: æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡
    LLM-->>DT: "ã‚ã€ã€ä¸‰ä½“ã€ã®ã“ã¨ã‹ãªï¼Ÿ<br/>SFå°èª¬ã§è¶…é¢ç™½ã‹ã£ãŸã‚ˆï¼"
    DT-->>User: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¿œç­”
```

### 4.3 ãƒ¡ãƒ¢ãƒªéšå±¤çµ±åˆ

```mermaid
graph LR
    subgraph "3å±¤ãƒ¡ãƒ¢ãƒªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£"
        A[å³æ™‚è¨˜æ†¶<br/>Redis 20ã‚¿ãƒ¼ãƒ³] --> B[çŸ­æœŸè¨˜æ†¶<br/>Redis 24h TTL]
        B --> C[é•·æœŸè¨˜æ†¶<br/>Qdrant RAG]
    end
    
    D[ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›] --> A
    A --> E[duo-talk]
    B --> E
    C --> E
    E --> F[å¿œç­”ç”Ÿæˆ]
    
    style C fill:#ffe1e1
```

---

## 5. 2ãƒ•ã‚§ãƒ¼ã‚ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### 5.1 Phase 1: RAGæ§‹ç¯‰ï¼ˆCLIï¼‰

#### å®Ÿè¡Œç’°å¢ƒ
```bash
# Ubuntu 24.04 + RTX A5000
# æ¨å¥¨: tmux/screenã§é•·æ™‚é–“å®Ÿè¡Œ

conda activate rag-builder
cd ~/aituber-rag-builder
```

#### CLIã‚³ãƒãƒ³ãƒ‰è¨­è¨ˆ
```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
python rag_builder.py init --project-name "yana-character" \
    --character-id "yana_001"

# 2. ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ç™»éŒ²
python rag_builder.py add-source \
    --type video \
    --path /data/archives/*.mp4 \
    --transcribe-model whisper-large-v3

python rag_builder.py add-source \
    --type pdf \
    --path /data/docs/*.pdf \
    --ocr-enable

python rag_builder.py add-source \
    --type image \
    --path /data/images/*.png \
    --caption-model blip2

# 3. å‡¦ç†å®Ÿè¡Œ
python rag_builder.py build \
    --embedding-model intfloat/multilingual-e5-large \
    --chunk-size 500 \
    --chunk-overlap 50 \
    --gpu-id 0 \
    --batch-size 32

# 4. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰
python rag_builder.py index \
    --qdrant-url localhost:6333 \
    --collection-name yana_memory \
    --vector-size 1024

# 5. æ¤œè¨¼
python rag_builder.py validate \
    --test-queries queries.json \
    --output-report report.html
```

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
~/aituber-rag-builder/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ yana_config.yaml
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                # å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â”œâ”€â”€ pdfs/
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”œâ”€â”€ processed/          # å‡¦ç†æ¸ˆã¿
â”‚   â”‚   â”œâ”€â”€ transcripts/
â”‚   â”‚   â”œâ”€â”€ extracted_text/
â”‚   â”‚   â””â”€â”€ captions/
â”‚   â””â”€â”€ embeddings/         # åŸ‹ã‚è¾¼ã¿
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ chunks.jsonl        # åˆ†å‰²ãƒãƒ£ãƒ³ã‚¯
â”‚   â”œâ”€â”€ metadata.json       # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ build_report.html   # ãƒ¬ãƒãƒ¼ãƒˆ
â””â”€â”€ rag_builder.py          # CLIãƒ„ãƒ¼ãƒ«
```

### 5.2 Phase 2: duo-talkçµ±åˆ

#### çµ±åˆãƒã‚¤ãƒ³ãƒˆ
```python
# duo-talk/src/memory/rag_memory.py

from qdrant_client import QdrantClient
from sentence_transformers import SentenceTransformer

class RAGMemory:
    def __init__(self, collection_name="yana_memory"):
        self.client = QdrantClient(host="localhost", port=6333)
        self.encoder = SentenceTransformer(
            "intfloat/multilingual-e5-large"
        )
        self.collection = collection_name
    
    def retrieve(self, query: str, top_k=5, character_id=None):
        """é•·æœŸè¨˜æ†¶æ¤œç´¢"""
        # ã‚¯ã‚¨ãƒªãƒ™ã‚¯ãƒˆãƒ«åŒ–
        query_vector = self.encoder.encode(query).tolist()
        
        # ãƒ•ã‚£ãƒ«ã‚¿è¨­å®š
        filter_condition = None
        if character_id:
            filter_condition = {
                "must": [
                    {"key": "character_id", "match": {"value": character_id}}
                ]
            }
        
        # æ¤œç´¢
        results = self.client.search(
            collection_name=self.collection,
            query_vector=query_vector,
            limit=top_k,
            query_filter=filter_condition,
            score_threshold=0.7  # é–¢é€£æ€§é–¾å€¤
        )
        
        return [
            {
                "text": hit.payload["text"],
                "metadata": hit.payload["metadata"],
                "score": hit.score
            }
            for hit in results
        ]
```

#### duo-talkã¸ã®çµ„ã¿è¾¼ã¿
```python
# duo-talk/src/dialogue_manager.py

class DialogueManager:
    def __init__(self):
        self.rag_memory = RAGMemory()
        self.redis_memory = RedisMemory()  # çŸ­æœŸè¨˜æ†¶
        
    def generate_response(self, user_input, character_id):
        # 1. å³æ™‚è¨˜æ†¶å–å¾—ï¼ˆRedisï¼‰
        recent_history = self.redis_memory.get_recent(20)
        
        # 2. é•·æœŸè¨˜æ†¶æ¤œç´¢ï¼ˆRAGï¼‰
        long_term_context = self.rag_memory.retrieve(
            query=user_input,
            top_k=3,
            character_id=character_id
        )
        
        # 3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
        prompt = self._build_prompt(
            user_input=user_input,
            recent_history=recent_history,
            long_term_context=long_term_context
        )
        
        # 4. LLMç”Ÿæˆ
        response = self.llm.generate(prompt)
        
        return response
```

---

## 6. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### 6.1 Week 1-2: RAGæ§‹ç¯‰CLIé–‹ç™º

```yaml
ã‚¿ã‚¹ã‚¯:
  - [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ã‚³ãƒãƒ³ãƒ‰
  - [ ] Whisperæ–‡å­—èµ·ã“ã—çµ±åˆ
  - [ ] PDFæŠ½å‡ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
  - [ ] ç”»åƒã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ç”Ÿæˆ
  - [ ] ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ãƒ­ã‚¸ãƒƒã‚¯
  - [ ] ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆãƒ»å®Ÿè£…
  
æˆæœç‰©:
  - rag_builder.py (CLI)
  - config.yaml (è¨­å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ)
  - README.md (ä½¿ã„æ–¹)
```

### 6.2 Week 3: åŸ‹ã‚è¾¼ã¿ï¼†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

```yaml
ã‚¿ã‚¹ã‚¯:
  - [ ] åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«é¸å®šãƒ»ãƒ†ã‚¹ãƒˆ
  - [ ] ãƒãƒƒãƒå‡¦ç†æœ€é©åŒ–
  - [ ] Qdrantã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  - [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - [ ] æ¤œè¨¼ã‚¯ã‚¨ãƒªä½œæˆ
  
æˆæœç‰©:
  - embeddings/ (ç”Ÿæˆæ¸ˆã¿åŸ‹ã‚è¾¼ã¿)
  - Qdrant collection (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹)
  - validation_report.html
```

### 6.3 Week 4: duo-talkçµ±åˆ

```yaml
ã‚¿ã‚¹ã‚¯:
  - [ ] RAGMemoryã‚¯ãƒ©ã‚¹å®Ÿè£…
  - [ ] DialogueManagerçµ±åˆ
  - [ ] ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è¨ˆæ¸¬ãƒ»æœ€é©åŒ–
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - [ ] çµ±åˆãƒ†ã‚¹ãƒˆ
  
æˆæœç‰©:
  - duo-talk/src/memory/rag_memory.py
  - çµ±åˆãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆ
```

### 6.4 Week 5: è©•ä¾¡ãƒ»æ”¹å–„

```yaml
ã‚¿ã‚¹ã‚¯:
  - [ ] æ¤œç´¢ç²¾åº¦è©•ä¾¡ (Recall@K)
  - [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹å“è³ªè©•ä¾¡
  - [ ] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è²«æ€§ãƒ†ã‚¹ãƒˆ
  - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
  - [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
  
æˆæœç‰©:
  - è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ
  - æœ€é©åŒ–æ¸ˆã¿ã‚·ã‚¹ãƒ†ãƒ 
  - é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
```

---

## ä»˜éŒ²A: æ¨å¥¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### A.1 æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º
```yaml
éŸ³å£°æ–‡å­—èµ·ã“ã—: openai/whisper-large-v3
PDFå‡¦ç†: pypdf2, pdfplumber, pytesseract (OCR)
ç”»åƒå‡¦ç†: BLIP-2, CLIP
åŸ‹ã‚è¾¼ã¿: intfloat/multilingual-e5-large ã¾ãŸã¯ cl-nagoya/ruri-large-v3
ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²: LangChain RecursiveCharacterTextSplitter
CLI: Click or Typer
é€²æ—è¡¨ç¤º: tqdm, rich
```

### A.2 åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚º
```yaml
ãƒ™ã‚¯ãƒˆãƒ«DB: Qdrant
ã‚¯ã‚¨ãƒªåŸ‹ã‚è¾¼ã¿: æ§‹ç¯‰æ™‚ã¨åŒã˜ãƒ¢ãƒ‡ãƒ«
LLM: vLLM + Qwen2.5-7B-Instruct-AWQ
ãƒ¡ãƒ¢ãƒª: Redis (çŸ­æœŸ), Qdrant (é•·æœŸ)
```

---

## ä»˜éŒ²B: ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### B.1 ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚³ã‚¹ãƒˆ
```
æ—¢å­˜ç’°å¢ƒåˆ©ç”¨: 0å††
  - A5000: æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º
  - RTX1660Ti: åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚º

è¿½åŠ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 5,000-10,000å††
  - 1TB SSD (RAGãƒ‡ãƒ¼ã‚¿å°‚ç”¨)
```

### B.2 é›»æ°—ä»£æ¦‚ç®—
```
æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º (5æ—¥é–“):
  - A5000: 230W Ã— 120h = 27.6kWh
  - é›»æ°—ä»£: ç´„800å†† (@30å††/kWh)

åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚º (æœˆé–“):
  - RTX1660Ti: 120W Ã— 720h = 86.4kWh
  - é›»æ°—ä»£: ç´„2,600å††/æœˆ
```

---

## ä»˜éŒ²C: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### C.1 æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º
```
å•é¡Œ: GPU OOM (Out of Memory)
å¯¾ç­–:
  - ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’æ¸›ã‚‰ã™ (32 â†’ 16 â†’ 8)
  - å‡¦ç†ã‚’åˆ†å‰²å®Ÿè¡Œ
  - ç”»åƒè§£åƒåº¦ã‚’ä¸‹ã’ã‚‹

å•é¡Œ: Whisperå‡¦ç†ãŒé…ã„
å¯¾ç­–:
  - whisper-large â†’ whisper-medium
  - CTranslate2ã§é«˜é€ŸåŒ–
  - GPUã‚’2æšä½¿ã† (A5000 + 2080Super)
```

### C.2 åˆ©ç”¨ãƒ•ã‚§ãƒ¼ã‚º
```
å•é¡Œ: æ¤œç´¢ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·é«˜ã„
å¯¾ç­–:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ (efå€¤)
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹åŒ–
  - ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶æœ€é©åŒ–

å•é¡Œ: é–¢é€£æ€§ã®ä½ã„çµæœãŒè¿”ã‚‹
å¯¾ç­–:
  - score_threshold ã‚’ä¸Šã’ã‚‹ (0.7 â†’ 0.75)
  - top_k ã‚’å¢—ã‚„ã—ã¦å†ãƒ©ãƒ³ã‚­ãƒ³ã‚°
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿å¼·åŒ–
```

---

**ä»•æ§˜æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0  
**æœ€çµ‚æ›´æ–°**: 2025-01-11  
**ä½œæˆè€…**: Tsuyoshi + Claude  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: duo-talk AITuber RAGçµ±åˆ
